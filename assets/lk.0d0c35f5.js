import{s as k,o as e,c as a,a as t,b as x,w as M,F as _,i as $,t as l,k as p,T as N,d as n,r as f,g as v,j as r,h as C,l as y,f as P,n as w,m as O,p as L,e as U}from"./entry.f5195c75.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import{s as E,a as I,_ as z}from"./BasicLotterySection.c9ca0a45.js";const B={data:()=>({page:1,countOnPage:5,isListEnd:!1}),mounted(){this.fetchCodes()},methods:{async fetchCodes(){await this.$store.dispatch("user/fetchActiveCodeList",{page:this.page,countOnPage:this.countOnPage})},async loadMoreCode(){this.countOnPage+=5,await this.fetchCodes(),this.isListEnd=!(this.countOnPage<=this.$store.state.user.activeCodeList.length)},showModal:k}},W={class:"data-card"},A={class:"data-card__title-box"},V=t("h2",{class:"data-card__title"},"Мои коды",-1),F=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#plus"})],-1),H=[F],G={class:"data-card__text-box"},R=t("time",{class:"data-card__time"},"08.07.2023",-1),q={class:"data-card__code"},J={key:0,class:"data-card__status"},K={key:1,class:"data-card__status"},Q={key:2,class:"data-card__status data-card__status--green"},X={key:0,class:"data-card__button-box"},Y=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#refresh"})],-1);function Z(h,s,u,d,g,c){return e(),a("div",W,[t("div",A,[V,t("button",{class:"button button--orange button--orange-xs data-card__desktop-btn",onClick:s[0]||(s[0]=o=>c.showModal("code"))},"Зарегистрировать код"),t("button",{class:"button button--orange button--orange-xs button--icon-only data-card__mobile-btn",onClick:s[1]||(s[1]=o=>c.showModal("code"))},H)]),x(N,{name:"code-list"},{default:M(()=>[(e(!0),a(_,null,$(h.$store.state.user.activeCodeList,(o,i)=>(e(),a("div",{class:"data-card__row",key:i},[t("div",G,[R,t("span",q,l(o.code_content),1)]),o.status==="duplicate"?(e(),a("span",J,"Дубликат")):p("",!0),o.status==="wrong_code"?(e(),a("span",K,"Неверный код")):p("",!0),o.status==="success"?(e(),a("span",Q,"Одобрен")):p("",!0)]))),128))]),_:1}),h.isListEnd?p("",!0):(e(),a("div",X,[t("button",{class:"button button--outline-orange data-card__more-button",onClick:s[2]||(s[2]=(...o)=>c.loadMoreCode&&c.loadMoreCode(...o))},[n("Показать еще "),Y])]))])}const tt=T(B,[["render",Z]]);const st={class:"data-card"},et=t("div",{class:"data-card__title-box"},[t("h2",{class:"data-card__title"},"Мои призы")],-1),at={class:"data-card__text-box"},ot=t("time",{class:"data-card__time"},"08.07.2023",-1),ct={class:"data-card__text"},nt={class:"data-card__text"},it={class:"data-card__button-box"},rt=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#refresh"})],-1),_t={__name:"UserWinCard",setup(h){let s=f(2),u=f([]),d=f(!1);v(()=>{g()});async function g(){await fetch(`https://promo-orenbeer.dreamdev.space/user-lottery-results/?token=${localStorage.getItem("userToken")}&page=1&per_page=${s.value}`).then(async o=>{let i=await o.json();u.value=i.userLotteryResults})}async function c(){s.value+=1,await g(),d.value=s.value<=u.value.length}return(o,i)=>(e(),a("div",st,[et,x(N,{name:"win-list",tag:"ul"},{default:M(()=>[(e(!0),a(_,null,$(r(u),(m,b)=>(e(),a("div",{class:"data-card__row",key:b},[t("div",at,[ot,t("span",ct,[m.lotteryType==="instant"?(e(),a(_,{key:0},[n(" Мгновенный приз ")],64)):p("",!0),m.lotteryType==="basic"?(e(),a(_,{key:1},[n(" Обычная лотерея ")],64)):p("",!0),m.lotteryType==="collection"?(e(),a(_,{key:2},[n(" Коллекция стикеров ")],64)):p("",!0)])]),t("span",nt,l(m.prizeName),1)]))),128))]),_:1}),t("div",it,[r(d)?p("",!0):(e(),a("button",{key:0,class:"button button--outline-orange data-card__more-button",onClick:c},[n(" Показать еще "),rt]))])]))}},dt=_t,lt={class:"data-card"},ut={class:"data-card__title-box"},pt=t("h2",{class:"data-card__title"},"Мои данные",-1),ht=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#pencil"})],-1),mt=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#pencil"})],-1),gt=[mt],xt={class:"data-card__name"},kt={class:"data-card__birthday"},bt={class:"data-card__contacts"},$t=t("svg",{class:"data-card__contacts-icon"},[t("use",{"xlink:href":"#phone"})],-1),vt={class:"data-card__contacts"},ft=t("svg",{class:"data-card__contacts-icon"},[t("use",{"xlink:href":"#envelope"})],-1),yt={key:0,class:"data-card__info-box"},wt=P('<p class="data-card__info-text-big"> Получите +50 баллов <br class="show-desktop">за подтверждение e-mail </p><p class="data-card__info-text">Получите +50 баллов за подтверждение e-mail</p><p class="data-card__info-text-small"> Для этого необходимо перейти по ссылке из письма. Если вы не получали письмо, то <a class="text-orange" href="#">запросите его ещё раз.</a></p>',3),Ct=[wt],St={class:"data-card__score-row"},It={class:"data-card__score"},jt={class:"data-card__score-value"},Mt={class:"data-card__score"},Nt={class:"data-card__score-value"},Pt={__name:"UserDataCard",setup(h){const s=C(),u=y(()=>{var o,i;return((o=s.state.user.data)==null?void 0:o.firstName)===""?"Имя":(i=s.state.user.data)==null?void 0:i.firstName}),d=y(()=>{var o,i;return((o=s.state.user.data)==null?void 0:o.lastName)===""?"Фамилия":(i=s.state.user.data)==null?void 0:i.lastName}),g=y(()=>{if(s.state.user.data.phone){let o=s.state.user.data.phone.split("");return`+${o[0]} ${o[1]}${o[2]}${o[3]} ${o[4]}${o[5]}${o[6]} ${o[7]}${o[8]} ${o[9]}${o[10]}`}else return"-"});v(()=>{s.dispatch("user/getSticker")});function c(){k("user"),s.state.modal.getDataFunc()}return(o,i)=>(e(),a("div",lt,[t("div",ut,[pt,t("button",{class:"button button--outline-orange data-card__desktop-btn",onClick:c},[n("Редактировать "),ht]),t("button",{onClick:i[0]||(i[0]=m=>r(k)("code")),class:"button button--outline-orange button--icon-only data-card__mobile-btn","aria-label":"Edit"},gt)]),t("p",xt,l(u.value)+" "+l(d.value),1),t("p",kt," Дата рождения: "+l(r(s).state.user.data.dateOfBirth),1),t("p",bt,[$t,n(l(g.value),1)]),t("p",vt,[ft,n(" "+l(r(s).state.user.data.email),1)]),r(s).state.user.data.gotEmailBonus?p("",!0):(e(),a("div",yt,Ct)),t("div",St,[t("p",It,[t("span",jt,l(r(s).state.user.data.loyalty_points),1),r(s).state.user.data.loyalty_points===1?(e(),a(_,{key:0},[n("Балл")],64)):r(s).state.user.data.loyalty_points<5&&r(s).state.user.data.loyalty_points!==0?(e(),a(_,{key:1},[n("Балла")],64)):(e(),a(_,{key:2},[n("Баллов")],64))]),t("p",Mt,[t("span",Nt,l(r(s).getters["user/getStikerCount"]),1),r(s).getters["user/getStikerCount"]===1?(e(),a(_,{key:0},[n("Стикер")],64)):r(s).getters["user/getStikerCount"]<5&&r(s).getters["user/getStikerCount"]!==0?(e(),a(_,{key:1},[n("Стикера")],64)):(e(),a(_,{key:2},[n("Стикеров")],64))])])]))}},Tt=Pt,j=[{title:"Мини пивоварня",subtitle:'Соберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">30 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Соберите все 4 стикера для участия",isActive:!1,items:[{srcset:"/images/sticker1@1x.webp, /images/sticker1@2x.webp 2x",srcImg:"images/sticker1@2x.jpg 2x"},{srcset:"/images/sticker2@1x.webp, /images/sticker2@2x.webp 2x",srcImg:"images/sticker2@2x.jpg 2x"},{srcset:"/images/sticker3@1x.webp, /images/sticker3@2x.webp 2x",srcImg:"images/sticker3@2x.jpg 2x"},{srcset:"/images/sticker4@1x.webp, /images/sticker4@2x.webp 2x",srcImg:"images/sticker4@2x.jpg 2x"}]},{title:"Варочный цех",subtitle:'Cоберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">45 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Вы участвуйте",isActive:!0,items:[{srcset:"/images/sticker5@1x.webp, /images/sticker5@2x.webp 2x",srcImg:"images/sticker5@2x.jpg 2x"},{srcset:"/images/sticker6@1x.webp, /images/sticker6@2x.webp 2x",srcImg:"images/sticker6@2x.jpg 2x"},{srcset:"/images/sticker7@1x.webp, /images/sticker7@2x.webp 2x",srcImg:"images/sticker7@2x.jpg 2x"},{srcset:"/images/sticker8@1x.webp, /images/sticker8@2x.webp 2x",srcImg:"images/sticker8@2x.jpg 2x"}]},{title:"Цех розлива пива",subtitle:'Соберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">60 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Соберите все 4 стикера для участия",isActive:!1,items:[{srcset:"/images/sticker9@1x.webp, /images/sticker9@2x.webp 2x",srcImg:"images/sticker9@2x.jpg 2x"},{srcset:"/images/sticker10@1x.webp, /images/sticker10@2x.webp 2x",srcImg:"images/sticker10@2x.jpg 2x"},{srcset:"/images/sticker11@1x.webp, /images/sticker11@2x.webp 2x",srcImg:"images/sticker11@2x.jpg 2x"},{srcset:"/images/sticker12@1x.webp, /images/sticker12@2x.webp 2x",srcImg:"images/sticker12@2x.jpg 2x"}]}],Dt={class:"section-dashboard container"},Ot=t("h2",{class:"section-dashboard__title"},[t("span",{class:"text-orange"},"Регистрируйте больше кодов"),n(","),t("br"),n("получайте стикеры и баллы, выигрывайте призы")],-1),Lt={class:"section-dashboard__grid"},Ut={class:"section-dashboard__col"},Et={class:"section-dashboard__col-title"},zt=["innerHTML"],Bt={class:"section-dashboard__players"},Wt={class:"section-dashboard__players-counter"},At={class:"section-dashboard__col-grid"},Vt=["onClick"],Ft=["srcset"],Ht=["src","srcset"],Gt={class:"sticker__text"},Rt={key:0,class:"sticker__counter"},qt={key:0,class:"section-dashboard__col-status-icon"},Jt=t("use",{"xlink:href":"#thumbs-up"},null,-1),Kt=[Jt],Qt={__name:"StikersSection",setup(h){const s=C();v(()=>{s.dispatch("lottery/fetchCollectionLottery")});function u(d){d.activatedCount&&(s.commit("modal/setStickerData",d),s.commit("modal/setStickerWin",!1),k("sticker"))}return(d,g)=>(e(),a("section",Dt,[Ot,t("div",Lt,[(e(!0),a(_,null,$(d.$store.state.lottery.collection,(c,o)=>(e(),a("div",Ut,[t("h3",Et,l(c.name),1),t("p",{class:"section-dashboard__col-text",innerHTML:c.description},null,8,zt),t("p",Bt,[n(" Сейчас участвует: "),t("span",Wt,l(c.participantCount),1),c.participantCount>1&&c.participantCount<5?(e(),a(_,{key:0},[n(" человека ")],64)):(e(),a(_,{key:1},[n(" человек ")],64))]),t("div",At,[(e(!0),a(_,null,$(c.stickers,(i,m)=>(e(),a("figure",{onClick:b=>u(i),class:w(["sticker",{"sticker--disabled":!i.activatedCount}])},[t("picture",null,[t("source",{srcset:r(j)[o].items[m].srcset,type:"image/webp"},null,8,Ft),t("img",{class:"sticker__img",src:i.iconUrl,srcset:r(j)[o].items[m].srcImg,alt:""},null,8,Ht)]),t("figcaption",null,[t("p",Gt,l(i.name),1),i.activatedCount?(e(),a("span",Rt,l(i.activatedCount),1)):p("",!0)])],10,Vt))),256))]),t("p",{class:w(["section-dashboard__col-status",{"section-dashboard__col-status--green":c.isParticipant}])},[c.isParticipant?(e(),a("svg",qt,Kt)):p("",!0),c.isParticipant?(e(),a(_,{key:2},[n(" Вы участвуйте ")],64)):(e(),a(_,{key:1},[n(" Соберите все 4 стикера для участия ")],64))],2)]))),256))])]))}},Xt=Qt,Yt={class:"section-instant section-instant--lk container"},Zt={class:"section-instant__content-box"},ts=P('<h2 class="section-instant__title"><svg class="section-instant__title-icon"><use xlink:href="#lightning"></use></svg>Мгновенные призы </h2><p class="section-instant__text"><span class="text-orange">ПОКУПАЙТЕ БОЛЬШЕ</span> продукции и получите шанс выиграть мгновенные призы </p>',2),ss={class:"swiper section-instant__slider-elem",id:"instant-slider"},es={class:"swiper-wrapper section-instant__grid"},as={class:"section-instant__grid-col swiper-slide"},os=["onClick"],cs={class:"instant-card__img-box"},ns=["srcset"],is=["src","srcset"],rs={class:"instant-card__text"},_s={key:0,class:"instant-card__counter"},ds={__name:"InstantSection",setup(h){const s=C();v(()=>{s.dispatch("lottery/fetchInstantLottery"),window.innerWidth<1024&&E("instant-slider")});function u(d){d.isParticipant&&(s.commit("modal/setStickerData",d.stickers[0]),s.commit("modal/setStickerWin",!1),k("sticker"))}return(d,g)=>(e(),a("section",Yt,[t("div",Zt,[ts,t("div",ss,[t("div",es,[(e(!0),a(_,null,$(d.$store.state.lottery.instant,(c,o)=>(e(),a("div",as,[t("figure",{class:w(["instant-card instant-card--bg1",{"instant-card--disabled":!c.isParticipant}]),onClick:i=>u(c)},[t("div",cs,[t("picture",null,[t("source",{srcset:r(I)[o].srcset,type:"image/webp"},null,8,ns),t("img",{class:"instant-card__img",src:c.stickers[0].iconUrl,srcset:r(I)[o].imgSrcset,alt:""},null,8,is)])]),t("figcaption",rs,[n(l(c.name)+" ",1),c.stickers[0].activatedCount?(e(),a("span",_s,l(c.stickers[0].activatedCount),1)):p("",!0)])],10,os)]))),256))])])])]))}},ls=ds;const D=h=>(L("data-v-cdebe635"),h=h(),U(),h),us={class:"main"},ps={class:"section-data"},hs={class:"container"},ms=D(()=>t("h1",{class:"section-data__title"},"Личный кабинет",-1)),gs={class:"section-data__grid"},xs=D(()=>t("section",{class:"section-instant-prizes container"},[t("h2",{class:"section-instant-prizes__title"}),t("p",{class:"section-instant-prizes__text"}),t("div",{class:"section-instant-prizes__grid"})],-1)),ks={class:"section-lk-text container"},bs={key:0,class:"section-lk-text__text"},$s={key:1,class:"section-lk-text__text"},vs={class:"section-lk-text__text"},fs={__name:"lk",setup(h){return v(()=>{localStorage.getItem("userToken")||O("/")}),(s,u)=>{var b,S;const d=tt,g=dt,c=Tt,o=Xt,i=ls,m=z;return e(),a("main",us,[t("section",ps,[t("div",hs,[ms,t("div",gs,[x(d),x(g),x(c)])])]),x(o),x(i),x(m,{isLk:""}),xs,t("section",ks,[(b=s.$store.state.user.data)!=null&&b.firstName?(e(),a("h2",bs,l((S=s.$store.state.user.data)==null?void 0:S.firstName)+", желаем вам удачи!",1)):(e(),a("h2",$s,"Желаем вам удачи!")),t("p",vs,[n(" Если остались вопросы — "),t("span",{class:"text-orange",onClick:u[0]||(u[0]=ys=>r(k)("feedback"))},"напишите нам"),n(". ")])])])}}},Is=T(fs,[["__scopeId","data-v-cdebe635"]]);export{Is as default};
